{"ast":null,"code":"var _window=window,$=_window.$;$.validator.messages.required=\"必填欄位\";$.validator.addMethod(\"validate-name\",function(value,element){return new RegExp(/^[\\u4e00-\\u9fa5_a-zA-Z_ ]{1,40}$/i).test(value);},\"請不要輸入數字或符號\");//override email with django email validator regex - fringe cases: \"user@admin.state.in..us\" or \"name@website.a\"\n$.validator.addMethod(\"email\",function(value,element){if(value){return /^[a-zA-Z0-9.!#$%&'*+\\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+$/i.test(value);}return true;},\"電郵地址格式錯誤\");$.validator.addMethod(\"phone\",function(value,element){var phoneReg8=new RegExp(/^(10001000|[2-9]{1}[0-9]{7})$/).test(value);if(value){return phoneReg8;}return true;},\"電話格式不正確，請輸入8位數字電話號碼\");$.validator.addMethod(\"taiwan-phone\",function(value,element){var phoneReg6=new RegExp(/^(0|886|\\+886)?(9\\d{8})$/).test(value);var phoneReg7=new RegExp(/^(0|886|\\+886){1}[2-8]-?\\d{6,8}$/).test(value);if(value){return phoneReg6||phoneReg7;}return true;},\"電話格式不正確，請只輸入數字 0912345678 和 02-23612351\");$.validator.addMethod(\"taiwan-phone\",function(value,element){var phoneReg6=new RegExp(/^(0|886|\\+886)?(9\\d{8})$/).test(value);var phoneReg7=new RegExp(/^(0|886|\\+886){1}[2-8]-?\\d{6,8}$/).test(value);if(value){return phoneReg6||phoneReg7;}return true;},\"電話格式不正確，請只輸入數字 0912345678 和 02-23612351\");$.validator.addClassRules({// connect it to a css class\nemail:{email:true},phone:{phone:true},\"taiwan-phone\":{\"taiwan-phone\":true}});/**\n * Collect all the input values inside the form\n * @param  {DOM} form Native js Element (not in jquery form)\n * @return {Object} {name:value, ...}\n */export var fetchFormInputs=function fetchFormInputs(form){var obj={};form.querySelectorAll(\"input\").forEach(function(el,idx){var v=null;if(el.type===\"checkbox\"){v=el.checked;}else{v=el.value;}obj[el.name]=v;});form.querySelectorAll(\"select\").forEach(function(el,idx){obj[el.name]=el.options[el.selectedIndex].value;});return obj;};/**\n * Retrieve the form POST URL\n * @return {string} URL\n */export var getPostURL=function getPostURL(){return document.querySelector(\"#mc-form\").action;};/**\n * Retrieve the current number of supporters and signup targets\n * @return {object} {numSignup:int, numSignupTarget:int}\n */export var getNumSignupsAndTarget=function getNumSignupsAndTarget(){var numSignupTarget=parseInt(document.querySelector('input[name=\"numSignupTarget\"]').value,10)||0,numResponses=parseInt(document.querySelector('input[name=\"numResponses\"]').value,10)||0;return{numSignupTarget:numSignupTarget,numSignup:numResponses};};/**\n * Display the full loading screen\n *\n * Remember to add the following style to your page:\n */export var showFullPageLoading=function showFullPageLoading(){if(!document.querySelector(\"#page-loading\")){document.querySelector(\"body\").insertAdjacentHTML(\"beforeend\",\"\\n\\t\\t\\t<div id=\\\"page-loading\\\" class=\\\"hide\\\">\\n\\t\\t\\t  <div class=\\\"lds-ellipsis\\\"><div></div><div></div><div></div><div></div></div>\\n\\t\\t\\t</div>\");}setTimeout(function(){// to enable the transition\ndocument.querySelector(\"#page-loading\").classList.remove(\"hide\");},0);};/**\n * Hide the full page loading\n */export var hideFullPageLoading=function hideFullPageLoading(){document.querySelector(\"#page-loading\").classList.add(\"hide\");setTimeout(function(){document.querySelector(\"#page-loading\").remove();},1100);};/**\n * Send the tracking event to the ga\n * @param  {string} eventLabel The ga trakcing name, normally it will be the short campaign name. ex 2019-plastic_retailer\n * @param  {[type]} eventValue Could be empty\n * @return {[type]}            [description]\n */export var sendPetitionTracking=function sendPetitionTracking(eventLabel,eventValue){window.dataLayer=window.dataLayer||[];window.dataLayer.push({event:\"gaEvent\",eventCategory:\"petitions\",eventAction:\"signup\",eventLabel:eventLabel,eventValue:eventValue});window.dataLayer.push({event:\"fbqEvent\",contentName:eventLabel,contentCategory:\"Petition Signup\"});};/**\n * We provide two helper class to quickly switch the block show/hide\n * in the dd page: `is-hidden-at-dd-page-only`, `is-shown-at-dd-page-only`\n *\n * This function use the current url to distinguish the dd page.\n * The dd page should have url like this: xxx?utm_source=dd\n */$(function(){document.querySelector(\"#copyright-year\").innerHTML=new Date().getFullYear();// if dd\nif(window.location.href.indexOf(\"utm_source=dd\")>=0){var style=document.createElement(\"style\");style.innerHTML=\".is-hidden-at-dd-page-only {\\n\\t\\t\\t\\tdisplay: none !important;\\n\\t\\t\\t}\\n\\t\\t\\t.is-shown-at-dd-page-only {\\n\\t\\t\\t\\tdisplay: block !important;\\n\\t\\t\\t}\";document.head.appendChild(style);}else{// not in the dd page\nvar _style=document.createElement(\"style\");_style.innerHTML=\"\\n\\t\\t\\t.is-shown-at-dd-page-only {\\n\\t\\t\\t\\tdisplay: none !important;\\n\\t\\t\\t}\";document.head.appendChild(_style);}});","map":{"version":3,"sources":["/Users/cchan/Documents/GitHub/gpea-hongkong-pet-general_mc/src/App/jquery.mc.form-helper.js"],"names":["window","$","validator","messages","required","addMethod","value","element","RegExp","test","phoneReg8","phoneReg6","phoneReg7","addClassRules","email","phone","fetchFormInputs","form","obj","querySelectorAll","forEach","el","idx","v","type","checked","name","options","selectedIndex","getPostURL","document","querySelector","action","getNumSignupsAndTarget","numSignupTarget","parseInt","numResponses","numSignup","showFullPageLoading","insertAdjacentHTML","setTimeout","classList","remove","hideFullPageLoading","add","sendPetitionTracking","eventLabel","eventValue","dataLayer","push","event","eventCategory","eventAction","contentName","contentCategory","innerHTML","Date","getFullYear","location","href","indexOf","style","createElement","head","appendChild"],"mappings":"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","sourcesContent":["const { $ } = window;\n\n$.validator.messages.required = \"必填欄位\";\n\n$.validator.addMethod(\n  \"validate-name\",\n  (value, element) => {\n    return new RegExp(/^[\\u4e00-\\u9fa5_a-zA-Z_ ]{1,40}$/i).test(value);\n  },\n  \"請不要輸入數字或符號\"\n);\n\n//override email with django email validator regex - fringe cases: \"user@admin.state.in..us\" or \"name@website.a\"\n$.validator.addMethod(\n  \"email\",\n  (value, element) => {\n    if (value) {\n      return /^[a-zA-Z0-9.!#$%&'*+\\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+$/i.test(\n        value\n      );\n    }\n\n    return true;\n  },\n  \"電郵地址格式錯誤\"\n);\n\n$.validator.addMethod(\n  \"phone\",\n  (value, element) => {\n    const phoneReg8 = new RegExp(/^(10001000|[2-9]{1}[0-9]{7})$/).test(value);\n\n    if (value) {\n      return phoneReg8;\n    }\n    return true;\n  },\n  \"電話格式不正確，請輸入8位數字電話號碼\"\n);\n\n$.validator.addMethod(\n  \"taiwan-phone\",\n  (value, element) => {\n    const phoneReg6 = new RegExp(/^(0|886|\\+886)?(9\\d{8})$/).test(value);\n    const phoneReg7 = new RegExp(/^(0|886|\\+886){1}[2-8]-?\\d{6,8}$/).test(\n      value\n    );\n\n    if (value) {\n      return phoneReg6 || phoneReg7;\n    }\n    return true;\n  },\n  \"電話格式不正確，請只輸入數字 0912345678 和 02-23612351\"\n);\n\n$.validator.addMethod(\n  \"taiwan-phone\",\n  (value, element) => {\n    const phoneReg6 = new RegExp(/^(0|886|\\+886)?(9\\d{8})$/).test(value);\n    const phoneReg7 = new RegExp(/^(0|886|\\+886){1}[2-8]-?\\d{6,8}$/).test(\n      value\n    );\n\n    if (value) {\n      return phoneReg6 || phoneReg7;\n    }\n    return true;\n  },\n  \"電話格式不正確，請只輸入數字 0912345678 和 02-23612351\"\n);\n\n$.validator.addClassRules({\n  // connect it to a css class\n  email: { email: true },\n  phone: { phone: true },\n  \"taiwan-phone\": { \"taiwan-phone\": true },\n});\n\n/**\n * Collect all the input values inside the form\n * @param  {DOM} form Native js Element (not in jquery form)\n * @return {Object} {name:value, ...}\n */\nexport const fetchFormInputs = (form) => {\n  let obj = {};\n  form.querySelectorAll(\"input\").forEach(function (el, idx) {\n    let v = null;\n\n    if (el.type === \"checkbox\") {\n      v = el.checked;\n    } else {\n      v = el.value;\n    }\n\n    obj[el.name] = v;\n  });\n  form.querySelectorAll(\"select\").forEach(function (el, idx) {\n    obj[el.name] = el.options[el.selectedIndex].value;\n  });\n\n  return obj;\n};\n\n/**\n * Retrieve the form POST URL\n * @return {string} URL\n */\nexport const getPostURL = () => {\n  return document.querySelector(\"#mc-form\").action;\n};\n\n/**\n * Retrieve the current number of supporters and signup targets\n * @return {object} {numSignup:int, numSignupTarget:int}\n */\nexport const getNumSignupsAndTarget = () => {\n  var numSignupTarget =\n      parseInt(\n        document.querySelector('input[name=\"numSignupTarget\"]').value,\n        10\n      ) || 0,\n    numResponses =\n      parseInt(\n        document.querySelector('input[name=\"numResponses\"]').value,\n        10\n      ) || 0;\n\n  return {\n    numSignupTarget,\n    numSignup: numResponses,\n  };\n};\n\n/**\n * Display the full loading screen\n *\n * Remember to add the following style to your page:\n */\n\nexport const showFullPageLoading = () => {\n  if (!document.querySelector(\"#page-loading\")) {\n    document.querySelector(\"body\").insertAdjacentHTML(\n      \"beforeend\",\n      `\n\t\t\t<div id=\"page-loading\" class=\"hide\">\n\t\t\t  <div class=\"lds-ellipsis\"><div></div><div></div><div></div><div></div></div>\n\t\t\t</div>`\n    );\n  }\n\n  setTimeout(() => {\n    // to enable the transition\n    document.querySelector(\"#page-loading\").classList.remove(\"hide\");\n  }, 0);\n};\n\n/**\n * Hide the full page loading\n */\nexport const hideFullPageLoading = () => {\n  document.querySelector(\"#page-loading\").classList.add(\"hide\");\n\n  setTimeout(() => {\n    document.querySelector(\"#page-loading\").remove();\n  }, 1100);\n};\n\n/**\n * Send the tracking event to the ga\n * @param  {string} eventLabel The ga trakcing name, normally it will be the short campaign name. ex 2019-plastic_retailer\n * @param  {[type]} eventValue Could be empty\n * @return {[type]}            [description]\n */\nexport const sendPetitionTracking = (eventLabel, eventValue) => {\n  window.dataLayer = window.dataLayer || [];\n\n  window.dataLayer.push({\n    event: \"gaEvent\",\n    eventCategory: \"petitions\",\n    eventAction: \"signup\",\n    eventLabel: eventLabel,\n    eventValue: eventValue,\n  });\n\n  window.dataLayer.push({\n    event: \"fbqEvent\",\n    contentName: eventLabel,\n    contentCategory: \"Petition Signup\",\n  });\n};\n\n/**\n * We provide two helper class to quickly switch the block show/hide\n * in the dd page: `is-hidden-at-dd-page-only`, `is-shown-at-dd-page-only`\n *\n * This function use the current url to distinguish the dd page.\n * The dd page should have url like this: xxx?utm_source=dd\n */\n\n$(() => {\n  document.querySelector(\n    \"#copyright-year\"\n  ).innerHTML = new Date().getFullYear();\n  // if dd\n  if (window.location.href.indexOf(\"utm_source=dd\") >= 0) {\n    let style = document.createElement(\"style\");\n    style.innerHTML = `.is-hidden-at-dd-page-only {\n\t\t\t\tdisplay: none !important;\n\t\t\t}\n\t\t\t.is-shown-at-dd-page-only {\n\t\t\t\tdisplay: block !important;\n\t\t\t}`;\n    document.head.appendChild(style);\n  } else {\n    // not in the dd page\n    let style = document.createElement(\"style\");\n    style.innerHTML = `\n\t\t\t.is-shown-at-dd-page-only {\n\t\t\t\tdisplay: none !important;\n\t\t\t}`;\n    document.head.appendChild(style);\n  }\n});\n"]},"metadata":{},"sourceType":"module"}